import{N as O,d,i as c,O as x,Q as E,k as s,R as h,h as p,o as u,w as l,H as _,S as f,s as V,U as N,V as v,W as w,X as R,Y as k,Z as S,$ as B,a0 as Y,a1 as A,a2 as L,a3 as U,a4 as D,a5 as F,a6 as j,e as M,t as z,a as P,K as W,E as H,b as C,_ as K}from"./index-C8rU9OOB.js";const Q="/icons/klipper.svg",X="/icons/dialog-ok-apply.svg",[I,b]=O("ClipboardContext"),Z=d({__name:"clipboard-context",setup(e){const t=b();return(a,o)=>c(a.$slots,"default",x(E(s(t))))}}),q=d({__name:"clipboard-control",props:{asChild:{type:Boolean}},setup(e){const t=b();return h(),(a,o)=>(u(),p(s(f).div,_(s(t).getControlProps(),{"as-child":e.asChild}),{default:l(()=>[c(a.$slots,"default")]),_:3},16,["as-child"]))}}),G=d({__name:"clipboard-indicator",props:{asChild:{type:Boolean}},setup(e){const t=b();return h(),(a,o)=>(u(),p(s(f).div,_(s(t).getIndicatorProps({copied:s(t).copied}),{"as-child":e.asChild}),{default:l(()=>[s(t).copied?c(a.$slots,"copied",{key:0}):c(a.$slots,"default",{key:1})]),_:3},16,["as-child"]))}}),J=d({__name:"clipboard-input",props:{asChild:{type:Boolean}},setup(e){const t=b();return h(),(a,o)=>(u(),p(s(f).input,_(s(t).getInputProps(),{"as-child":e.asChild}),{default:l(()=>[c(a.$slots,"default")]),_:3},16,["as-child"]))}}),ee=d({__name:"clipboard-label",props:{asChild:{type:Boolean}},setup(e){const t=b();return h(),(a,o)=>(u(),p(s(f).label,_(s(t).getLabelProps(),{"as-child":e.asChild}),{default:l(()=>[c(a.$slots,"default")]),_:3},16,["as-child"]))}}),te=d({__name:"clipboard-root-provider",props:{value:{},asChild:{type:Boolean}},setup(e){const t=e,a=V(()=>t.value);return I(a),h(),(o,n)=>(u(),p(s(f).div,_(a.value.getRootProps(),{"as-child":e.asChild}),{default:l(()=>[c(o.$slots,"default")]),_:3},16,["as-child"]))}});var ae=N("clipboard").parts("root","control","trigger","indicator","input","label"),m=ae.build(),oe=e=>{var t;return((t=e.ids)==null?void 0:t.root)??`clip:${e.id}`},T=e=>{var t;return((t=e.ids)==null?void 0:t.input)??`clip:${e.id}:input`},se=e=>{var t;return((t=e.ids)==null?void 0:t.label)??`clip:${e.id}:label`},ne=e=>e.getById(T(e)),re=(e,t)=>ce(e.getDoc(),t);function le(e,t){const a=e.createElement("pre");return Object.assign(a.style,{width:"1px",height:"1px",position:"fixed",top:"5px"}),a.textContent=t,a}function ie(e){const a=B(e).getSelection();if(a==null)return Promise.reject(new Error);a.removeAllRanges();const o=e.ownerDocument,n=o.createRange();return n.selectNodeContents(e),a.addRange(n),o.execCommand("copy"),a.removeAllRanges(),Promise.resolve()}function ce(e,t){var n;const a=e.defaultView||window;if(((n=a.navigator.clipboard)==null?void 0:n.writeText)!==void 0)return a.navigator.clipboard.writeText(t);if(!e.body)return Promise.reject(new Error);const o=le(e,t);return e.body.appendChild(o),ie(o),e.body.removeChild(o),Promise.resolve()}function de(e,t){const{state:a,send:o,context:n,scope:g}=e,r=a.matches("copied");return{copied:r,value:n.get("value"),setValue(i){o({type:"VALUE.SET",value:i})},copy(){o({type:"COPY"})},getRootProps(){return t.element({...m.root.attrs,"data-copied":v(r),id:oe(g)})},getLabelProps(){return t.label({...m.label.attrs,htmlFor:T(g),"data-copied":v(r),id:se(g)})},getControlProps(){return t.element({...m.control.attrs,"data-copied":v(r)})},getInputProps(){return t.input({...m.input.attrs,defaultValue:n.get("value"),"data-copied":v(r),readOnly:!0,"data-readonly":"true",id:T(g),onFocus(i){i.currentTarget.select()},onCopy(){o({type:"INPUT.COPY"})}})},getTriggerProps(){return t.button({...m.trigger.attrs,type:"button","aria-label":r?"Copied to clipboard":"Copy to clipboard","data-copied":v(r),onClick(){o({type:"COPY"})}})},getIndicatorProps(i){return t.element({...m.indicator.attrs,hidden:i.copied!==r})}}}var pe=R({props({props:e}){return{timeout:3e3,defaultValue:"",...e}},initialState(){return"idle"},context({prop:e,bindable:t}){return{value:t(()=>({defaultValue:e("defaultValue"),value:e("value"),onChange(a){var o;(o=e("onValueChange"))==null||o({value:a})}}))}},watch({track:e,context:t,action:a}){e([()=>t.get("value")],()=>{a(["syncInputElement"])})},on:{"VALUE.SET":{actions:["setValue"]},COPY:{target:"copied",actions:["copyToClipboard","invokeOnCopy"]}},states:{idle:{on:{"INPUT.COPY":{target:"copied",actions:["invokeOnCopy"]}}},copied:{effects:["waitForTimeout"],on:{"COPY.DONE":{target:"idle"},COPY:{target:"copied",actions:["copyToClipboard","invokeOnCopy"]},"INPUT.COPY":{actions:["invokeOnCopy"]}}}},implementations:{effects:{waitForTimeout({prop:e,send:t}){return S(()=>{t({type:"COPY.DONE"})},e("timeout"))}},actions:{setValue({context:e,event:t}){e.set("value",t.value)},copyToClipboard({context:e,scope:t}){re(t,e.get("value"))},invokeOnCopy({prop:e}){var t;(t=e("onStatusChange"))==null||t({copied:!0})},syncInputElement({context:e,scope:t}){const a=ne(t);a&&k(a,e.get("value"))}}}});w()(["getRootNode","id","ids","value","defaultValue","timeout","onStatusChange","onValueChange"]);w()(["copied"]);const ue=(e={},t)=>{const a=Y(),o=A(L),n=V(()=>{const r=U(e);return{id:a,getRootNode:o==null?void 0:o.value.getRootNode,value:r.modelValue,onStatusChange:i=>t==null?void 0:t("statusChange",i),...D(r),onValueChange(i){var $;t==null||t("valueChange",i),t==null||t("update:modelValue",i.value),($=r.onValueChange)==null||$.call(r,i)}}}),g=F(pe,n);return V(()=>de(g,j))},ge=d({__name:"clipboard-root",props:{defaultValue:{},id:{},ids:{},modelValue:{},timeout:{},asChild:{type:Boolean}},emits:["statusChange","valueChange","update:modelValue"],setup(e,{emit:t}){const n=ue(e,t);return I(n),h(),(g,r)=>(u(),p(s(f).div,_(s(n).getRootProps(),{"as-child":e.asChild}),{default:l(()=>[c(g.$slots,"default")]),_:3},16,["as-child"]))}}),Ce=d({__name:"clipboard-trigger",props:{asChild:{type:Boolean}},setup(e){const t=b();return h(),(a,o)=>(u(),p(s(f).button,_(s(t).getTriggerProps(),{"as-child":e.asChild}),{default:l(()=>[c(a.$slots,"default")]),_:3},16,["as-child"]))}}),he=d({__name:"clipboard-value-text",props:{asChild:{type:Boolean}},setup(e){const t=b();return h(),(a,o)=>(u(),p(s(f).span,{"as-child":e.asChild},{default:l(()=>[c(a.$slots,"default",{},()=>[M(z(s(t).value),1)])]),_:3},8,["as-child"]))}}),y=Object.freeze(Object.defineProperty({__proto__:null,Context:Z,Control:q,Indicator:G,Input:J,Label:ee,Root:ge,RootProvider:te,Trigger:Ce,ValueText:he},Symbol.toStringTag,{value:"Module"})),fe=d({__name:"CopyToClipboard",props:{string:{},width:{}},setup(e){const t=new Image;t.src="/icons/dialog-ok-apply.svg";const a=navigator.userAgent.includes("Chrome");return(o,n)=>(u(),p(s(y).Root,{"default-value":e.string},{default:l(()=>[P(s(y).Control,null,{default:l(()=>[P(s(y).Input,{class:H(e.width),size:e.string.length,style:W(s(a)?"height: 26px;":"")},null,8,["class","size","style"]),P(s(y).Trigger,null,{default:l(()=>[P(s(y).Indicator,null,{copied:l(()=>[...n[0]||(n[0]=[C("span",{class:"bottom"},null,-1),C("span",{class:"side"},null,-1),C("span",{class:"face"},[C("img",{class:"icon",src:X})],-1)])]),default:l(()=>[n[1]||(n[1]=C("span",{class:"bottom"},null,-1)),n[2]||(n[2]=C("span",{class:"side"},null,-1)),n[3]||(n[3]=C("span",{class:"face"},[C("img",{class:"icon",src:Q})],-1))]),_:1})]),_:1})]),_:1})]),_:1},8,["default-value"]))}}),be=K(fe,[["__scopeId","data-v-1ad44c30"]]);export{be as C};
